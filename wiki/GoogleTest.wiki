#summary Как начать работу с системой тестирования googletest

Библиотека googletest доступна по адресу http://code.google.com/p/googletest

Здесь приводится лишь краткий список основных интересующих нас возможностей библиотеки.
Полную документацию можно найти по адресу http://code.google.com/p/googletest/wiki/Documentation

= Компиляция тестов =
== С использованием системного googletest ==
Проверим, установлен ли googletest:
{{{
$ ls /usr/lib/libgtest*.a /usr/include/gtest
/usr/lib/libgtest.a  /usr/lib/libgtest_main.a

/usr/include/gtest:
gtest-death-test.h  gtest.h  gtest-message.h  gtest-param-test.h  gtest_pred_impl.h  gtest_prod.h  gtest-spi.h  gtest-test-part.h  gtest-typed-test.h  internal
}}}

Если результат предыдущей коменды был пустым, то можно установить так:
{{{
$ sudo apt-get install -y libgtest-dev libgtest0
}}}

Теперь напишем наш первый тест с использованием библиотеки googletest - 
`googletest_demo.cpp`: 
{{{
#include <gtest/gtest.h>

int sum(int a, int b) { return a + b; }  // the function we want to test

TEST(MyFunctionTests, Sum) {
  ASSERT_EQ(4 /* expected */, sum(2, 2) /* actual */);
}
}}}

Скомпилируем и запустим его следующими командами:
{{{
$ g++ -l gtest_main -o googletest_demo googletest_demo.cpp
$ ./googletest_demo 
Running main() from gtest_main.cc
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from MyFunctionTests
[ RUN      ] MyFunctionTests.Sum
[       OK ] MyFunctionTests.Sum
[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran.
[  PASSED  ] 1 test.
}}}

Обратите внимание на отсутствие в файле googletest_demo.cpp функции `main()` - она уже есть в библиотеке `gtest_main`. Если по какой-то причине нам нужно использовать собственную версию `main()`, то вместо "`-l gtest_main`" следует использовать "`-l gtest`", а `main()` следует написать так:
{{{
int main(int argc, char **argv) {
  // InitGoogleTest() reads googletest flags; may change argc and argv!
  ::testing::InitGoogleTest(&argc, argv);

  // do your stuff here

  return RUN_ALL_TESTS();
}
}}}

== Сборка библиотеки из исходных кодов ==
Простая версия:
{{{
# Выполнять в папке, где лежит googletest_demo.cpp
$ svn checkout http://googletest.googlecode.com/svn/trunk/ googletest
...
# Собрать сам gtest и стандартную функцию main()
$ g++ -I googletest -I googletest/include -c -o gtest.a googletest/src/gtest-all.cc
$ g++ -I googletest -I googletest/include -c -o gtest_main.a googletest/src/gtest_main.cc
# Собрать наши тесты
$ g++ -I googletest/include -c -o googletest_demo.a googletest_demo.cpp
# Компоновка и запуск
$ g++ -o googletest_demo gtest.a gtest_main.a googletest_demo.a
$ ./googletest_demo 
Running main() from gtest_main.cc
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from MyFunctionTests
[ RUN      ] MyFunctionTests.Sum
[       OK ] MyFunctionTests.Sum (0 ms)
[----------] 1 test from MyFunctionTests (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (1 ms total)
[  PASSED  ] 1 test.
}}}

Варианты интеграции с системами сборки описаны в [http://code.google.com/p/googletest/wiki/Primer#Setting_up_a_New_Test_Project в официальной документации],<br>а также в исходных кодах ([http://code.google.com/p/googletest/source/browse/#svn%2Ftrunk%2Fmake Makefile], [http://code.google.com/p/googletest/source/browse/#svn%2Ftrunk%2Fcmake CMake], [http://code.google.com/p/googletest/source/browse/#svn%2Ftrunk%2Fmsvc Visual Studio], [http://code.google.com/p/googletest/wiki/XcodeGuide XCode]).

= Основные приемы работы =
== Семейства макросов ASSERT_XY, EXPECT_XY ==
*TODO*

== Группы тестов (Test fixtures) ==
*TODO*

== Средства коммандной строки ==
*TODO*