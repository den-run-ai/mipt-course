#summary Как настроить локальный buildbot

= Общая информация =
На данный момент для нашего проекта используется buildbot 0.8.4<br>
http://tinyurl.com/mipt-course-buildbot<br>
*TODO*: сделать постоянный адрес

Любой желающий может попробовать поднять свою копию buildbot локально.

Для желающих настроить собственный buildbot для своего проекта (вне mipt-course) я специально закоммитил вначале sample master.cfg, чтобы можно было легко посмотреть [http://code.google.com/p/mipt-course/source/diff?spec=svn151&old=33&r=77&format=side&path=%2Fbuildbot%2Fmaster.cfg чем же наш master.cfg отличается от примера].

Документация по buildbot доступна по адресу http://buildbot.net/buildbot/docs/0.8.4/

= Процедура установки buildbot на Linux Ubuntu Lucid 10.4 =
== Краткая инструкция ==
  * Устанавливаем необходимые пакеты
  * Заводим пользователей для master и slaves (это необязательно при локальном тестировании)
  * Настраиваем и стартуем master
  * Проверяем через http://localhost:8010/waterfall , что он запустился
  * Настраиваем и стартуем slave'ы
  * Проверяем через http://localhost:8010/waterfall , что они подсоединились к мастеру
  * Делаем необходимые изменения в мастере, вызываем `make reconfig log`
  * Для принудительного запуска билда нажимаем на странице slave'а кнопку "Force build"
  * (при необходимости) переходим на шаг "делаем необходимые изменения"

== Общее для master и slaves ==
{{{
sudo -i  # Предполагается что все выполняется под root в некоторой папке

apt-get install python-twisted

wget http://pypi.python.org/packages/source/d/distribute/distribute-0.6.14.tar.gz#md5=ac607e05682116c06383b27a15e2db90
tar xzf distribute-0.6.14.tar.gz
cd distribute-0.6.14
python distribute_setup.py
cd ..

wget http://pypi.python.org/packages/source/J/Jinja2/Jinja2-2.5.5.tar.gz#md5=83b20c1eeb31f49d8e6392efae91b7d5
tar xzf Jinja2-2.5.5.tar.gz
cd Jinja2-2.5.5
python setup.py install
cd ..
}}}

== master-only ==
{{{
# Это делается пользователем root
wget http://buildbot.googlecode.com/files/buildbot-0.8.4.zip
unzip buildbot-0.8.4.zip
cd buildbot-0.8.4
python setup.py build && python setup.py install
cd ..
}}}

{{{
# Это уже делается пользователем buildbot-master в папке, в которой ему можно хранить файлы
buildbot create-master -r .

svn checkout http://mipt-course.googlecode.com/svn/buildbot .
# В конце master.cfg находим строку "forceBuild = False," и меняем False на True.
make start log
}}}

== slave-only ==
{{{
# Это делается пользователем root
wget http://buildbot.googlecode.com/files/buildbot-slave-0.8.4.zip
unzip buildbot-slave-0.8.4.zip
cd buildbot-slave-0.8.4
python setup.py build && python setup.py install
cd ..
}}}

{{{
# Это уже делается пользователем buildbot-slave в папке, в которой ему можно хранить файлы
buildslave create-slave . localhost:9989 <имя Slave, например linux_bot> <пароль Slave, например bot1passwd>
buildslave start
tail -f twistd.log
}}}